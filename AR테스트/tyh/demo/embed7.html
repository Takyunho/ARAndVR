<!--! 3d model 넣기 및 동적으로 생성한 html에 비디오 넣기 -->
<!doctype html>
<html>

<head>
  <!--# a-frame -->
  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <!--# a-frame htmlembed -->
  <script src="https://supereggbert.github.io/aframe-htmlembed-component/dist/build.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
  <!--# video.js -->
  <!-- <script src="https://unpkg.com/video.js/dist/video.js"></script>
  <link href="https://unpkg.com/video.js/dist/video-js.css" rel="stylesheet">
  <script src="//cdn.dashjs.org/latest/dash.all.debug.js"></script>
  <script src="https://unpkg.com/videojs-contrib-dash/dist/videojs-dash.js"></script> -->
  <!--# hls.js -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script> -->
  <script src="./JS/hls.min.js"></script>
  <!--- video.js파일 (위치 중요)-->
  <script src="./JS/video.js"></script>
  <!--# tensorflow -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
  <!--# material icon -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <!--# Google Font(Noto Sans) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@1,100&display=swap" rel="stylesheet">
  <!--# moment -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
  <!--# css -->
  <link rel="stylesheet" href="./embed7.css">
  <!-- <link rel="stylesheet" href="./three2.css"> -->
  <!--# canvas -->
  <script src="https://cdn.rawgit.com/maxkrieger/aframe-draw-component/5a5d1e66/dist/aframe-draw-component.min.js"></script>


</head>

<body id="body">
  <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ video ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <!--# main video 1 -->
  <div class="video__container--main">
    <video id="main-video-0" class="main-video" style="width: 430px;" autoplay></video>
  </div>
  <!--# main video 2 -->
  <div class="video__container--main">
    <video id="main-video-1" class="main-video" style="width: 430px;"></video>
  </div>
  <!-- # main video 3 (yolo) -->
  <!-- <div class="video__container--main">
    <video id="main-video-2" class="main-video" style="width: 430px;"></video>
  </div> -->
  <!--# yolo video -->
  <div id="main">
    <div class="container">
      <div class="canvas-wrapper" >
        <video id="video" autoplay muted style="width:300; height:200; display: none; "></video>
        <canvas id="output" style="width:300; height:200; display: none;"></canvas>
        <video id="video2" autoplay muted style="width: 0; height: 0;"></video>
        <!-- cf) video2까지 display: none을 걸면 a-video에서 동작하지 않음 -->
      </div>
    </div>
  </div>


  <!--# sub video 1 -->
  <div class="video__container--sub">
    <video autoplay muted id="sub-video" width=500 height=300>
    </video>
  </div>

  

  <!--# hls.js로 rtsp -->
  <!-- <video id="video-rtsp1" autoplay muted></video> -->
  <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ video end ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->



  <!-- 장면에다가 fog="type: linear; color: #222; 를 주면 배경이 가려짐 -->
  <a-scene far: 30; webxr="requiredFeatures: hit-test,local-floor; optionalFeatures: dom-overlay,unbounded; overlayElement: #overlay;"
  raycaster="far: 100; objects: [link];" cursor="rayOrigin: mouse">
    <a-light id="dirlight" intensity="0.6" light="type: ambient" color="#e3d3c6" position="-10 20 1"></a-light>
    <!-- <a-light id="dirlight" intensity="1" light="castShadow:true; type:directional" position="0 6 1"></a-light>
    <a-light id="dirlight" intensity="1" light="castShadow:true; type:directional" position="10 3 1"></a-light>
    <a-light id="dirlight" intensity="1" light="castShadow:true; type:directional" position="10 3 1"></a-light> -->
    <!--@ assets -->
    <a-assets timeout="1000">
      <!-- a-link로 맵 이동하기 -->
      <img id="thumbJapan" crossOrigin="anonymous" src="https://cdn.aframe.io/link-traversal/thumbs/japan.png">
      <img id="thumbEgypt" crossOrigin="anonymous" src="https://cdn.aframe.io/link-traversal/thumbs/egypt.png">
      <img id="thumbForest" crossOrigin="anonymous" src="https://cdn.aframe.io/link-traversal/thumbs/forest.png">

      <img id="sky" src="./images/industrial_sunset_02_puresky.webp" />
      <img id="floor" src="./images/FloorStreets0100_1_download600.jpg">
      <img id="floor2" src="./images/FloorStreets_1.jpg">
      <!-- factory -->
      <a-asset-item id="factory" src="../../models/factory/scene.gltf"></a-asset-item>
      <a-asset-item id="factory2" src="../../models/abandoned_factory2/scene.gltf"></a-asset-item>
      <a-asset-item id="victorian-factory" src="../../models/victorian_factory/scene.gltf"></a-asset-item>
      <!-- 3d model -->
      <a-asset-item id="3dModel" src="./three/machine_011_light.gltf"></a-asset-item>
      <!-- server -->
      <a-asset-item id="server1" src="../../models/server_racking_system/scene.gltf"></a-asset-item>
      <a-asset-item id="server2" src="../../models/server/scene.gltf"></a-asset-item>
      <a-asset-item id="server3" src="../../models/server_rack_and_console_v3/scene.gltf"></a-asset-item>
      
    </a-assets>

    <!--@ 배경 -->
    <!-- <a-plane material="src:#floor; repeat: 700 700; transparent: true;" height="800" width="800" rotation="-90 0 0" position="0 -2 0"></a-plane> -->
    <!-- <a-plane color="#333" width="200" height="200" rotation="-90 0 0" position="0 -1.9 3"></a-plane> -->
    <a-plane material="src:#floor; repeat: 100 100; transparent: true;" width="200" height="200" rotation="-90 0 0" position="0 -3 3"></a-plane>
    <a-sky src="#sky"></a-sky>

    <!--@ 카메라 및 레이캐스터 -->
    <a-entity id="cameraRig">
      <!-- wasd 컨트롤 -->
      <a-entity id="cameraEntity" camera look-controls wasd-controls="acceleration: 800" position="0 1 0"></a-entity>
      <a-entity id="mouseCursor" cursor="rayOrigin: mouse" raycaster="objects: .screen;"></a-entity>
      <a-entity laser-controls raycaster="objects: .screen;"></a-entity>
    </a-entity>


    <!--# ========================================= 제1(main) 스크린 =============================================== -->
    <!--^ 첫번째 스크린 (메뉴가 달려있는 스크린) -->
    <a-entity id="menu" class="screen menu dark" htmlembed="ppu:256" position="-20 1 -20" rotation="0 30 0">
      <h2>Menu</h2>
      <ul class="list">
        <li><a class="btn" id="menuBtn">Live Streaming1</a></li>
        <li><a class="btn" id="menuBtn">Live Streaming2</a></li>
        <li><a class="btn" id="menuBtn">yolo Video</a></li>
        <li><a class="btn" id="menuBtn">4</a></li>
        <li><a class="btn" id="menuBtn">AR</a></li>
      </ul>
    </a-entity>

    <!--^ 메인스크린 -->
    <a-entity id="main" class="screen dark main" htmlembed="ppu:256" position="-15 1 -20.7">
      <!--@ 1번 페이지  -->
      <div id="page" class="page1">
        <h1>Video1</h1>
        <a class="btn next" id="menu-btn-next">Next Page</a>
      </div>
      <!--@ 2번 페이지 -->
      <div id="page" class="page2 hide">
        <h1>Video2</h1>
        <a class="btn prev" id="menu-btn-prev">Prev Page</a>
        <a class="btn next" id="menu-btn-next">Next Page</a>
      </div>
      <!--@ 3번 페이지 -->
      <div id="page" class="page3 hide">
        <h1>Video yolo</h1>
        <a class="btn prev" id="menu-btn-prev">Prev Page</a>
        <a class="btn next" id="menu-btn-next">Next Page</a>
      </div>
      <!--@ 4번 페이지 -->
      <div id="page" class="page4 hide">
        <h1>tab4</h1>
        <a class="btn prev" id="menu-btn-prev">Prev Page</a>
        <a class="btn next" id="menu-btn-next">Next Page</a>
      </div>
      <!--@ 5번 페이지 -->
      <div id="page" class="page5 hide">
        <h1>AR.js marker</h1>
        <img src="./three/marker.png" alt="" height="980px">
        <a class="btn prev" id="menu-btn-prev">Prev Page</a>
      </div> 
      <!--@ a-video -->
      <!--! a-frame 태그를 숨기기 위해서는 visible 속성을 이용 -->
      <a-video id="main-a-video" src="#main-video-0" position="0 0 0.1" rotation="0 0 0" width="7.5" height="3.7"></a-video>
      <!-- local에 있으니까 html5_api로 id 가져오기 -->
      <a-video id="main-a-video" src="#main-video-1" position="0 0 0.1" rotation="0 0 0" width="7.5" height="3.7" visible="false"></a-video>
      <!-- <a-video id="main-a-video" src="#main-video-2" position="0 0 0.1" rotation="0 0 0" width="7.5" height="3.7" visible="false"></a-video> -->
      <a-video id="main-a-video" src="#video2" position="0 0 0.1" rotation="0 0 0" width="7.5" height="3.7" visible="false"></a-video>
      
    </a-entity>


    <!-- ^ 세번째 스크린(링크)-->
    <a-entity id="menu videoMenu" class="screen menu dark" htmlembed="ppu:256" position="-10 1 -20"
      rotation="0 -30 0">
      <h2>Links</h2>
      <a class="imgLink" href="https://aframe.io/" target="_blank">
        <img src="./images/aframe.png" width="80" height="80">
        <div>A-Frame</div>
      </a>
      <a class="imgLink" href="https://github.com/supereggbert/aframe-htmlembed-component" target="_blank">
        <img src="./images/github.png" width="80" height="80">
        <div>Github</div>
      </a>
      <a class="imgLink" href="https://www.npmjs.com/package/aframe-htmlembed-component" target="_blank">
        <img src="./images/npm.png" width="80" height="80">
        <div>npm</div>
      </a>
    </a-entity>




    <!--# ========================================= 제2(sub) 스크린 =============================================== -->
    <!-- ^ sub 스크린1 -->
    <a-entity id="menu2" class="screen menu2 dark" htmlembed="ppu:256" position="-7 1 -20" rotation="0 30 0" style="width: 800px;">
      <!-- scroll up -->
      <a class="scrollUp" id="scrollUp">scroll up<span class="material-icons">arrow_upward</span></a>
      <!-- file list -->
      <div class="tab-content model-file-content">
        <table id="file-list" class="file-list">
          <colgroup>
            <col style="width: 100%">
          </colgroup>
          <thead class="thead"></thead>
          <tbody id="tbody" class="tbody">
            <!-- <tr>
              <td class="model-file-data btn" id="modelFileData${index}">1</td>
            </tr> -->
          </tbody>
        </table>
      </div>
      <!-- scroll down -->
      <a class="scrollDown" id="scrollDown">scroll down
        <span class="material-icons">arrow_downward</span>
      </a>
    </a-entity>

    <!--^ sub 스크린2 -->
    <a-entity id="main2" class="screen dark main" htmlembed="ppu:256" position="-1 1 -21" rotation="0 0 0">
      <!-- 동적으로 생성 -->
      <div id="sub-page">
        <h1>video</h1>
      </div>


      <!--@ a-video -->
      <a-video id="sub-a-video" src="#sub-video" position="0 0 0.05" rotation="0 0 0" width="7.5" height="3.7" visible="true"></a-video>
    </a-entity>


    <!-- - gltf -->
    <a-gltf-model id="page3" src="#3dModel" scale="1 1 1" position="11 -2.1 -18" rotation="0 0 0" width="7.5" height="3.7"></a-gltf-model>

    <a-entity gltf-model="#factory" position="0 -3 0" scale="0.08 0.08 0.08">
      <!-- 조명 -->
      <a-entity light="type: ambient; color: #BBB"></a-entity>
      <a-entity light="type: directional; color: #FFF; intensity: 0.8" position="-0.5 1 1"></a-entity>
    </a-entity>

    <!-- server gltf -->
    <a-entity gltf-model="#server1" position="-19 -2.5 10" rotation="0 90 0" scale="2 2 2">
      <a-entity light="type: directional; color: #FFF; intensity: 0.6" position="-15 8 1"></a-entity>
    </a-entity>
    <a-entity gltf-model="#server2" position="-19 -2.1 5" scale="0.02 0.02 0.02"></a-entity>
    <a-entity gltf-model="#server3" position="-19 -2.1 0" scale="1 1 1"></a-entity>
    <!-- a-link로 맵이동 -->
    <a-link href="./link/japan.html" position="5 1 -5" rotation="0 0 0" image="#thumbJapan" title="Japan"></a-link>
    <a-link href="./link/egypt.html" position="8 1 -5" rotation="0 0 0" image="#thumbEgypt" title="Egypt"></a-link>
    <a-link href="./link/forest.html" position="11 1 -5" rotation="0 0 0" image="#thumbForest" title="Forest"></a-link>

  </a-scene>
  
  <!-- 메인 비디오  -->
  <script>
    // 비디오 0
    (function () {
      const VIDEO_ID_0 = "webrtc:rtsp3";

      async function onSubscribe() {
          let video = document.querySelector("#main-video-0");
          video.muted = true;
          await $video.subscribe(video, VIDEO_ID_0, "primary-camera", false, true, "");
      }

      onSubscribe().then(function(){
        setTimeout(function(){
          let video = document.querySelector("#main-video-0");
        },10000);
      })
    })()
</script>
<script>
  // 비디오 1
  (function () {
    const VIDEO_ID_1 = "webrtc:rtsp2";

    async function onSubscribe() {
        let video2 = document.querySelector("#main-video-1");
        video2.muted = true;
        await $video.subscribe(video2, VIDEO_ID_1, "primary-camera", false, true, "");
    }

    onSubscribe().then(function(){
      setTimeout(function(){
        let video2 = document.querySelector("#main-video-1");
      },10000);
    })
  })()
</script>
<script>
  (function () {
    const VIDEO_ID_2 = "webrtc:rtsp3";
    console.log(VIDEO_ID_2);
    async function onSubscribe() {
        let video3 = document.querySelector("#video");
        video3.muted = true;
        await $video.subscribe(video3, VIDEO_ID_2, "primary-camera", false, true, "");
    }

    onSubscribe().then(function(){
      setTimeout(function(){
        let video3 = document.querySelector("#video");
      },10000);
    })
  }) ()
</script>

  <script src="./JS/mainScreen.js"></script>
  <script src="./JS/scrollUpDown.js"></script>
  <script defer src="./JS/fileList.js"></script>
  <!-- yolo -->
  <!-- <script src="./JS/imgCanvasVideo.js"></script> -->
  <script src="./JS/tensorflow.js">  </script>
  
  <!-- <script type="module" src="./threeMain.js"></script> -->
</body>


</html>