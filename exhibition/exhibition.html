<!--! embed7.html 참고 -->
<!doctype html>
<html lang="ko">

<head>
    <meta charset="utf-8">
    <meta name="description" content="Links • A-Frame">
    <!--# a-frame -->
    <!-- <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script> -->
    <script src="./src/vendor/aframe-extras.min.js"></script>
    <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
    <script src="./src/vendor/extended-wasd-controls.js"></script>
    <script src="./src/vendor/link-controls.js"></script>
    <!--# a-frame htmlembed -->
    <script src="https://supereggbert.github.io/aframe-htmlembed-component/dist/build.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
    <!--# hls.js -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script> -->
    <!-- <script src="./src/vendor/hls.min.js"></script> -->
    <!-- <script src="./src/JS/video.js"></script> -->
    <!--# material icon -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!--# Google Font(Noto Sans) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@1,100&display=swap" rel="stylesheet">
    <!--# moment -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
    <!--# css -->
    <link rel="stylesheet" href="./style/exhibition.css">
    <!--# canvas -->
    <script
        src="https://cdn.rawgit.com/maxkrieger/aframe-draw-component/5a5d1e66/dist/aframe-draw-component.min.js"></script>

</head>

<body id="body">

    <!-- <button class="info" id="infoBtn">이동하기</button> -->

    <div class="black-background">
        <div class="white-background">
            <button class="modal-close-btn" id="modal-close-btn">close</button>
            <div style="display: flex; flex-grow: 1;"></div>
            <p>AI 화재 안전 모니터링 시스템<button class="move-btn"><span class="material-symbols-outlined">trending_flat</span></button></p>
            <p>AI 예지보전 (다 관절 로봇)<button class="move-btn"><span class="material-symbols-outlined">trending_flat</span></button></p>
            <p>실시간 상태 모니터링<button class="move-btn"><span class="material-symbols-outlined">trending_flat</span></button></p>
            <p>환경 예측 (데이터 센터) <button class="move-btn"><span class="material-symbols-outlined">trending_flat</span></button></p>
            <p>AI 작업 지시 <button class="move-btn"><span class="material-symbols-outlined">trending_flat</span></button></p>
            <p>현장-오피스 화상통화 <button class="move-btn"><span class="material-symbols-outlined">trending_flat</span></button></p>
        </div>
    </div>

    <!--=> 장면 -->
    <a-scene physics id="scene" far: 30; raycaster="far: 30; objects: [link];" cursor="rayOrigin: mouse"
        loading-screen="dotsColor: white; backgroundColor: black; enabled: true;">
        <!--=> 조명 -->
        <!-- <a-entity light="type: spot; angle: 180; intensity: 1;"></a-entity> -->
        <a-entity light="type: ambient; color: #fff; intensity: 1.2;" ></a-entity>
        <a-entity light="type: hemisphere; groundColor: #fff; intensity: 0.8"></a-entity>
        <a-entity light="type: hemisphere; color: #fff; groundColor: #fff; intensity: 1"></a-entity>
        <!-- <a-entity light="type: hemisphere; color: #fff; groundColor: #fff; intensity: 0.8"></a-entity> -->
        <!-- <a-entity light="type: directional; color: #FFF; intensity: 0.8"></a-entity> -->
        <!-- <a-entity light="type: point; color: #fff; intensity: 1" position="-23 3 -3"></a-entity> -->
        <!-- <a-entity light="type: point; color: #333; intensity: 1" position="0 3 -20"></a-entity> -->

        <!--=> 카메라 및 레이캐스터 -->
        <!-- look-controls="pointerLockEnabled: true" => 마우스 클릭시 vr모드 -->
        <a-entity id="cameraRig" movement-controls kinematic-body jump-ability="enableDoubleJump: true; distance: 3;">
            <a-entity rotation-reader id="cameraEntity" camera="active: true" look-controls
            wasd-controls="acceleration: 150; fly: false;"
                position="-40 3 30" ></a-entity>
            <a-entity id="mouseCursor" cursor="rayOrigin: mouse" raycaster="objects: .screen;"></a-entity>
            <a-entity laser-controls raycaster="objects: .screen;"></a-entity>
        </a-entity>

        <!--=> assets -->
        <a-assets timeout="1000">
            <!-- a-link로 맵 이동하기 -->
            <img id="thumbGoIdbAI" crossOrigin="anonymous" src="./assets/images/goIdbAi.png">
            <img id="thumbArm" crossOrigin="anonymous" src="./assets/images/Arm.png">
            <img id="thumbCncMachine" crossOrigin="anonymous" src="./assets/images/CnCMachine.png">
            <img id="thumb" crossOrigin="anonymous" src="">
            <img id="thumbGenicosTank" crossOrigin="anonymous" src="./assets/images/genicosTank.png">
            <img id="thumbWebRTC" crossOrigin="anonymous" src="./assets/images/webRTC.png">
            <!-- 하늘, 바닥 -->
            <!-- <img id="sky" src="./assets/images/industrial_sunset_02_puresky.webp" /> -->
            <!-- <img id="floor" src="./assets/images/FloorStreets0100_1_download600.jpg"> -->
            <!-- => main hall -->
            <a-asset-item id="gallery_room" src="./assets/model/gallery_room/scene.gltf"></a-asset-item>
            <!-- => booth -->
            <a-asset-item id="exhibition_booth1" src="./assets/model/boot1_final.gltf"></a-asset-item>
            <a-asset-item id="exhibition_booth2" src="./assets/model/boot2_final.gltf"></a-asset-item>
            <a-asset-item id="exhibition_booth3" src="./assets/model/boot3_final.gltf"></a-asset-item>
            <a-asset-item id="exhibition_booth4" src="./assets/model/boot4_final.gltf"></a-asset-item>
            <a-asset-item id="exhibition_booth5" src="./assets/model/boot5_final.gltf"></a-asset-item>
            <a-asset-item id="exhibition_booth6" src="./assets/model/boot6_final.gltf"></a-asset-item>
        </a-assets>

        <!--=> 배경과 바닥 -->
        <!-- <a-sky src="#sky"></a-sky> -->
        <!-- <a-plane material="src:#floor; repeat: 100 100; transparent: true;" width="200" height="200" rotation="-90 0 0" position="0 -3 3"></a-plane> -->

        <!--^ gltf 모음-->
        <!-- => 방 전체 -->
        <a-entity dynamic-body="shape: box; mass: 2" gltf-model="#gallery_room" position="0 -3 0" scale="6 5 5" rotation="-0.2 -90 0" modify-materials></a-entity>
        <!-- => 각각의 부스 -->
        <a-entity gltf-model="#exhibition_booth1" position="-40 -2.5 -26" scale="4 4 4" rotation="0 0 0"></a-entity>
        <a-entity gltf-model="#exhibition_booth2" position="0 -3 -26" scale="4 4 4" rotation="0 0 0"></a-entity>
        <a-entity gltf-model="#exhibition_booth3" position="50 -3 -14" scale="5 5 5" rotation="0 -90 0"></a-entity>
        <a-entity gltf-model="#exhibition_booth4" position="45 -3 20" scale="3 3 3" rotation="0 -90 0"></a-entity>
        <a-entity gltf-model="#exhibition_booth5" position="13 -2.5 25" scale="5 5 5" rotation="0 -180 0"></a-entity>
        <a-entity gltf-model="#exhibition_booth6" position="-20 -2 26" scale="3 3 3" rotation="0 -180 0"></a-entity>


        <!--^ link -->
        <!-- => 1. go.idb.ai -->
        <a-entity position="-40 3 -20" link="backgroundColor: #444; href: ./view/room1/room1.html; titleColor: #000; title: AI fire safety monitoring; image: #thumbGoIdbAI; visualAspectEnabled: true"></a-entity>
        <!-- => 2. robot arm -->
        <a-entity position="0 3 -20" link="backgroundColor: #444; href: ./view/room2/Moving_Arm/index.html; titleColor: #fff; title: Robot Arm; image: #thumbGoIdbAI; visualAspectEnabled: true"></a-entity>
        <!-- => 3. cnc machine -->
        <a-entity position="37 3 -12" rotation="0 -90 0" link="backgroundColor: #444; href: ./view/room3/smic/three.html; titleColor: #000; title: CNC Machine; image: #thumbCncMachine; visualAspectEnabled: true"></a-entity>
        <!-- => 4. data center -->
        <a-entity position="40 3 17" rotation="0 -90 0" link="backgroundColor: #444; href: ./view/room4/room4.html; titleColor: #000; title: Real-time environment monitoring; image: #thumbParticle; visualAspectEnabled: true"></a-entity>
        <!-- => 5. AI 표준 공정 작업 지시 -->
        <a-entity position="13 3 16" link="backgroundColor: #444; href: ./view/room5/room5.html; titleColor: #fff; title: AI standard process work order; image: #thumbGenicosTank; visualAspectEnabled: true"></a-entity>
        <!-- => 6. 현장 오피스 화상통화 -->
        <a-entity position="-20 3 22" link="backgroundColor: #444; href: ./view/room6/room6.html; titleColor: #fff; title: Field-to-office video calling; image: #thumbWebRTC; visualAspectEnabled: true"></a-entity>
        <!-- <a-link href="./view/room6/room6.html" position="23 3 -32" rotation="0 -45 0" image="#thumbRoom5" title="Room5" peekMode="true"></a-link> -->


        <!-- ^ 바닥 클릭시 위치 이동하기 -->
        <!-- TODO 버튼 추가 및 포지션 정하기 -->
        <!-- <a-entity id="moveWrap" class="screen move" htmlembed="ppu:256" position="-40 -2 20" rotation="-90 0 0">
            <a class="moveLink" id="move">
                <div></div>
            </a>
        </a-entity>
        <a-entity id="moveWrap" class="screen move" htmlembed="ppu:256" position="-20 -2 20" rotation="-90 0 0">
            <a class="moveLink" id="move">
                <div></div>
            </a>
        </a-entity> -->


    </a-scene>


    <script>
        // TODO: 이동 버튼 만들기
        const move = document.querySelectorAll("#move");
        console.log(move)

        for (let i = 0; i < move.length; i++) {
            move[i].addEventListener("click", () => {
                const cameraEntity = document.getElementById("cameraEntity");
                cameraEntity.setAttribute("position", `0 3 -${(i + 1) * 10}`);
                // console.log(cameraEntity);
                // cameraEntity
            })
        }

        // 버튼 토글
        const infoBtn = document.getElementById("infoBtn");
        const blackBG = document.querySelector(".black-background");
        const modalCloseBtn = document.querySelector("#modal-close-btn");

        infoBtn.addEventListener('click', () => {
            blackBG.classList.toggle("upDown-slide");
            infoBtn.classList.toggle("hide");
        })

        modalCloseBtn.addEventListener('click', () => {
            blackBG.classList.remove("upDown-slide");
            infoBtn.classList.toggle("hide");
        })




        const moveBtn = document.querySelectorAll(".move-btn");

        // 1번룸 이동
        moveBtn[0].addEventListener('click', () => {
            const cameraEntity = document.getElementById('cameraEntity');
            cameraEntity.setAttribute('position', '-40 3 -10');
            
            // 카메라 포지션 바꾸고 싶은데,,
            // cameraEntity.addEventListener('onChange', () => {
            //     cameraEntity.object3D.rotation.x = 0
            //     cameraEntity.object3D.rotation.y = 0
            //     cameraEntity.object3D.rotation.z = 0
            // })

            // console.log(cameraEntity.object3D)
            // console.log(cameraEntity.object3D.rotation)
            blackBG.classList.remove("upDown-slide");   // 안내창 닫기
            infoBtn.classList.toggle("hide");
        })
        // 2번룸 이동
        moveBtn[1].addEventListener('click', () => {
            const cameraEntity = document.getElementById('cameraEntity');
            cameraEntity.setAttribute('position', '0 3 -10');
            blackBG.classList.remove("upDown-slide");   // 안내창 닫기
            infoBtn.classList.toggle("hide");
        })
        // 3번룸 이동
        // moveBtn[2].addEventListener('click', () => {
        //     const cameraEntity = document.getElementById('cameraEntity');
        //     cameraEntity.setAttribute('position', '37 3 -2');
        //     const cameraRig = document.getElementById('cameraRig');
        //     // console.log(cameraRig.object3D);
        //     // console.log(cameraRig.object3D.rotation)
        //     // cameraEntity.object3D.rotation.x = 0.11200000000000009;
        //     // cameraEntity.object3D.rotation.y = -1.5720000000000007;
        //     // cameraRig.object3D.rotation.z = 0;
        //     blackBG.classList.remove("upDown-slide");   // 안내창 닫기
        //     infoBtn.classList.toggle("hide");
        // })







        // AFRAME.registerComponent('rotation-reader', {
        //     tick: function () {
        //         // `this.el` is the element.
        //         // `object3D` is the three.js object.

        //         // `rotation` is a three.js Euler using radians. `quaternion` also available.
        //         console.log(this.el.object3D.rotation);

        //         // `position` is a three.js Vector3.
        //         // console.log(this.el.object3D.position);
        //     }
        // });

        // AFRAME.registerComponent('modify-materials', {
        //     init: function () {
        //     // Wait for model to load.
        //     this.el.addEventListener('model-loaded', () => {
        //         // Grab the mesh / scene.
        //         const obj = this.el.getObject3D('mesh');
        //         console.log(obj)
        //         // Go over the submeshes and modify materials we want.
        //         obj.traverse(node => {
        //         if (node.name.indexOf('ship') !== -1) {
        //             node.material.color.set('red');
        //         }
        //         });
        //     });
        //     }
        // });

    </script>


    <!-- <script src="./src/JS/mainScreen.js"></script> -->
</body>

</html>

